#диплом 

>[!info] Тема диплома
>трекер привычек и целей

# Важные ссылки

- [формочка в гугл](https://docs.google.com/forms/d/1499E-221SQ8svyMspj6MmIihDTNhEMPByIpTISvej1I/edit#responses)
- [моя доска в weeek](https://app.weeek.net/ws/685367/project/1/documents)
- [проектирование базы данных](планирование%20БД.md)
- [планирование архитектуры](планирование%20архитектуры.md)
- [ссылка на gitlab :)](https://gitlab.serega-pirat.ru/my-graduate-work)
- [мой дизай в фигме](https://www.figma.com/design/hvkitZkeBn2SQ0Uny7R5XD/Achievify?t=xtgk29VPZBNOkHJl-0)

# Стек :)

- Golang, Python — для бэка
- traefik — обратный прокси
- ReactJS/SolidJS
- React Native

# Итоговая концепция

По итогу, должна получиться система — трекер привычек для пользователей.
Будет реализован функционал создания привычки и ее нарабатывания путем выполнения специализированных квестов.

Примерный user story:

пользователь регистрируется 

→ пользователь создает привычку. Во время создании, NLP алгоритм предлагает выбрать тип привычки. Если пользователь не согласен, то он выбирает свой 

→ пользователю создается цепочка квестов(пока что 21 квест, на каждый день. Можно будет менять периодичность, офк количество квестов поменяется) 

→ квесты разделяются на 3 этапа: старт, прогресс и закрепление. В первый этап, выполняется определенное количество квестов и пользователю дается какое то достижение. И так далее, по аналогии

→  после прохождения всех квестов привычка остается(по идее), пользователь получает достижение.

Квесты генерируются по определенному шаблону. 
Будут шаблоны на каждую категорию привычки(мб потом будет «мастер-шаблон», который уникален для любой категории привычек).

Квесты будут описаны в фэнтезийном стиле(а-л RPG).

Обязательно добавить возможность интеграции ML.

## Core-functionality

- **авторизация по паролю + OAuth с Яндекс, Telegram**
- **создание привычки**
- **автоматическая классификация привычки на основе NLP-подобного алгоритма**
- **выбор класса привычки пользователем**
- генерация квестов в зависимости от **класса привычки**: генерация квестов будет происходить на основе **шаблона класса привычки**; иными словами — в зависимости от класса привычки, будет выбираться **определенный шаблон цепочки квестов** и уже будет генерироваться **нужная нам цепочка квестов**
- разбиение цепочки квестов на определенные этапы(допустим: «старт», «середина», «закрепление») 
- за каждый пройденный **этап** планируется давать **достижение пользователю**
- после выполнения цепочки квестов: либо **уникальное достижение** на основе типа привычки, либо **общее достижение**

## Дополнительный функционал

- дневник пользователя
- список друзей
- leaderboard
- автоматическая генерация квестов без использования шаблонов(машинное обучение офк)
- графики выполнения квестов на календаре
- аналитика следования привычкам
- мобильное приложение))90))


### пример шаблона

```
{
  "category": "Образование",
  "goal": "Сформировать привычку регулярного обучения",
  "duration_days": 21,
  "phases": [
    {
      "phase": "Запуск (Дни 1–7)",
      "description": "Минимальные шаги для старта",
      "quests": [
        {
          "day": 1,
          "type": "trigger",
          "description": "Заняться {subject} всего {base_time} минут",
          "reward": { "xp": 10, "badge": "Старт" },
          "params": { "base_time": 10 }
        },
        {
          "day": 2,
          "type": "consistency",
          "description": "Повторить в то же время, что вчера (+{base_time} мин)",
          "reward": { "xp": 15, "badge": null }
        },
        {
          "day": 3,
          "type": "environment",
          "description": "Организовать учебное место (стол, закладки, свет)",
          "reward": { "xp": 20, "badge": "Организатор" }
        },
        {
          "day": 4,
          "type": "micro_learning",
          "description": "Потратить {base_time} мин на конспект ключевых идей",
          "reward": { "xp": 15, "badge": null }
        },
        {
          "day": 5,
          "type": "chain",
          "description": "Не прервать цепь: 5 дней подряд учиться",
          "reward": { "xp": 30, "badge": "Серийный ученик" }
        },
        {
          "day": 6,
          "type": "reminder",
          "description": "Поставить напоминание на завтра с мотивирующей фразой",
          "reward": { "xp": 10, "badge": null }
        },
        {
          "day": 7,
          "type": "celebration",
          "description": "Отметить первую неделю: {base_time} мин + чай/кофе",
          "reward": { "xp": 40, "badge": "Неделя побед" }
        }
      ]
    },
    {
      "phase": "Интеграция (Дни 8–14)",
      "description": "Связать обучение с рутиной",
      "quests": [
        {
          "day": 8,
          "type": "habit_stack",
          "description": "Учиться сразу после {routine} (например, завтрака)",
          "reward": { "xp": 25, "badge": null }
        },
        {
          "day": 9,
          "type": "increase",
          "description": "Увеличить время до {new_time} мин (+25%)",
          "reward": { "xp": 30, "badge": "Прогресс" },
          "params": { "new_time": "calc: base_time * 1.25" }
        },
        {
          "day": 10,
          "type": "social",
          "description": "Обсудить тему с другом/в чате",
          "reward": { "xp": 20, "badge": "Коммуникатор" }
        },
        {
          "day": 11,
          "type": "practice",
          "description": "Решить 3 практические задачи по теме",
          "reward": { "xp": 35, "badge": null }
        },
        {
          "day": 12,
          "type": "variation",
          "description": "Попробовать новый формат (подкаст/вебинар вместо книги)",
          "reward": { "xp": 25, "badge": "Экспериментатор" }
        },
        {
          "day": 13,
          "type": "failure_plan",
          "description": "Написать план действий на случай усталости",
          "reward": { "xp": 20, "badge": "Стратег" }
        },
        {
          "day": 14,
          "type": "reward",
          "description": "Купить книгу/курс в награду за две недели",
          "reward": { "xp": 50, "badge": "Инвестиция в себя" }
        }
      ]
    },
    {
      "phase": "Закрепление (Дни 15–21)",
      "description": "Сделать обучение естественной частью жизни",
      "quests": [
        {
          "day": 15,
          "type": "auto_mode",
          "description": "Заниматься без напоминаний",
          "reward": { "xp": 40, "badge": "Автопилот" }
        },
        {
          "day": 16,
          "type": "identity",
          "description": "Написать: «Я — человек, который учится каждый день»",
          "reward": { "xp": 30, "badge": "Новая идентичность" }
        },
        {
          "day": 17,
          "type": "deep_work",
          "description": "Погрузиться в тему на {new_time} мин без отвлечений",
          "reward": { "xp": 45, "badge": null }
        },
        {
          "day": 18,
          "type": "teaching",
          "description": "Объяснить тему новичку (даже вслух себе)",
          "reward": { "xp": 50, "badge": "Наставник" }
        },
        {
          "day": 19,
          "type": "tracking",
          "description": "Проанализировать прогресс за 19 дней",
          "reward": { "xp": 25, "badge": null }
        },
        {
          "day": 20,
          "type": "ritual",
          "description": "Связать обучение с приятным ритуалом (музыка, аромат)",
          "reward": { "xp": 35, "badge": "Ритуал" }
        },
        {
          "day": 21,
          "type": "final",
          "description": "Пройти итоговый тест + записать цели на следующий месяц",
          "reward": { "xp": 100, "badge": "Выпускник" }
        }
      ]
    }
  ],
  "variables": {
    "subject": "Предмет изучения (например, Python, история)",
    "base_time": "Начальное время (мин)",
    "new_time": "calc: base_time * 1.25",
    "routine": "Существующая привычка (завтрак, утренний кофе)"
  },
  "rules": {
    "skip_rule": "Пропуск 1 дня → повторить предыдущий квест. Пропуск 2 дней → уменьшить нагрузку на 20%.",
    "dynamic_xp": "XP за квесты 8–21 дней увеличен на 20% для мотивации."
  }
}
```

## Mind map
![[Pasted image 20250202111756.png]]

## Use case
### **Основные сценарии использования (Use Cases)**

1. **Регистрация и авторизация**
    
    - **Актор:** Пользователь
    - **Описание:**  
        Пользователь проходит регистрацию через ввод пароля или через OAuth (Яндекс, Telegram). Система проверяет учетные данные, создает или обновляет профиль пользователя.
    - **Основной поток:**
        1. Пользователь выбирает способ регистрации/авторизации.
        2. Если выбран OAuth, система перенаправляет на внешний сервис, где происходит аутентификация, затем возвращается в систему.
        3. Если выбран ввод пароля – пользователь заполняет форму, система проверяет данные.
        4. Система подтверждает регистрацию/авторизацию и предоставляет доступ к функционалу.
2. **Создание привычки**
    
    - **Актор:** Пользователь
    - **Описание:**  
        Пользователь инициирует создание новой привычки, вводит её название и описание. Система с помощью NLP-алгоритма предлагает выбрать тип привычки или позволяет пользователю выбрать свой вариант.
    - **Основной поток:**
        1. Пользователь выбирает опцию «Создать привычку».
        2. Вводит название, описание и, при необходимости, дополнительные параметры.
        3. Система анализирует ввод с помощью NLP и предлагает тип привычки.
        4. Пользователь принимает предложенный тип или выбирает другой.
        5. Система сохраняет привычку и переходит к генерации квестов.
3. **Генерация цепочки квестов**
    
    - **Актор:** Система
    - **Описание:**  
        После создания привычки система генерирует цепочку квестов на основе выбранного типа привычки и заданного шаблона. Квесты делятся на этапы (старт, прогресс, закрепление).
    - **Основной поток:**
        1. Система выбирает соответствующий шаблон цепочки квестов.
        2. Генерируются индивидуальные квесты на каждый день (или другой период).
        3. Квесты сохраняются в системе и становятся доступны пользователю.
4. **Выполнение квеста**
    
    - **Актор:** Пользователь
    - **Описание:**  
        Пользователь просматривает доступные квесты и выполняет их, отмечая выполнение. Система фиксирует прогресс, обновляет статус этапа и, при выполнении этапа, присваивает достижение.
    - **Основной поток:**
        1. Пользователь заходит в раздел с квестами.
        2. Выбирает текущий квест для выполнения.
        3. После выполнения квеста пользователь отмечает его выполнение.
        4. Система обновляет прогресс, проверяет, завершен ли этап.
        5. При завершении этапа, пользователю присваивается достижение.
5. **Просмотр аналитики и прогресса**
    
    - **Актор:** Пользователь
    - **Описание:**  
        Пользователь просматривает отчеты, графики выполнения квестов и аналитику по привычкам, чтобы оценить свой прогресс.
    - **Основной поток:**
        1. Пользователь заходит в раздел «Аналитика» или «Мой прогресс».
        2. Система отображает графики, календарь выполненных квестов, статистику и достижения.
        3. Пользователь анализирует данные для корректировки своих действий.
6. **Ведение дневника**
    
    - **Актор:** Пользователь
    - **Описание:**  
        Пользователь ведет записи в дневнике, где может оставлять комментарии, мысли, ощущения по выполнению квестов и прогрессу.
    - **Основной поток:**
        1. Пользователь открывает раздел «Дневник».
        2. Создает новую запись или редактирует существующую.
        3. Система сохраняет запись и, при необходимости, использует NLP для анализа обратной связи.
7. **Социальное взаимодействие**
    
    - **Актор:** Пользователь
    - **Описание:**  
        Пользователь взаимодействует с друзьями, просматривает leaderboard, участвует в совместных квестах или клановых активностях.
    - **Основной поток:**
        1. Пользователь заходит в раздел «Друзья» или «Лидерборд».
        2. Система отображает список друзей, рейтинг пользователей и достижения.
        3. При необходимости, пользователь может отправлять запросы на дружбу или вступать в группы.




# абоба
## Общая концепция

В основе Clean Architecture лежит идея разделения системы на слои, при этом внешние слои (фреймворки, UI, внешние сервисы) зависят от внутренних (бизнес-правил, домена), а не наоборот. В контексте модульного монолита можно выделить следующие основные слои внутри каждого модуля:

- **Домен (Entities):**  
    Содержит бизнес-модели, сущности и доменные правила. Это самое ядро, не зависящее ни от чего внешнего.
    
- **Use Cases (Interactors/Application Services):**  
    Содержит бизнес-логику в виде сценариев использования, которые оперируют доменными объектами. Здесь описываются все случаи использования (например, создание привычки, генерация квестов, начисление достижений).
    
- **Интерфейсы (Interface Adapters):**  
    Слой адаптеров, которые преобразуют данные из внешних источников (HTTP-запросов, БД, очередей, SSO-сервисов) в формат, понятный внутренним слоям, и наоборот. В него входят контроллеры, репозитории (интерфейсы доступа к данным), презентеры и т.д.
    
- **Инфраструктура (Frameworks & Drivers):**  
    Реализации интерфейсов доступа к данным, внешние сервисы, реализации SSO-провайдеров, фреймворки для веб-сервера и т.п. Этот слой зависит от технологий и внешних библиотек, но должен быть максимально изолирован от бизнес-логики.
    

---

## 2. Разбиение на модули

В модульном монолите можно разделить приложение на несколько самостоятельных модулей, каждый из которых будет придерживаться принципов Clean Architecture. Пример модулей для вашего проекта:

1. **Модуль Аутентификации и Пользователей**
    
    - **Домен:** Сущности User, UserProfile.
    - **Use Cases:** Регистрация, вход в систему, синхронизация с authentik, обновление профиля (например, аватарка).
    - **Интерфейсы:** Контроллеры (HTTP API для регистрации/входа), интерфейсы репозиториев для работы с БД, адаптеры для интеграции с authentik.
    - **Инфраструктура:** Реализация репозитория (например, на PostgreSQL), реализация адаптера для проверки и валидации JWT, интеграция с внешним SSO.
2. **Модуль Привычек и Квестов**
    
    - **Домен:** Сущности Habit, Quest, QuestTemplate.
    - **Use Cases:** Создание привычки, генерация цепочки квестов (с использованием шаблонов или NLP/ML), распределение квестов по этапам.
    - **Интерфейсы:** Контроллеры API для создания и обновления привычек, интерфейсы репозиториев для хранения привычек и квестов, презентеры для формирования ответов клиенту.
    - **Инфраструктура:** Реализация доступа к данным, интеграция с внешними библиотеками для NLP/ML (если они используются как внешние зависимости).
3. **Модуль Достижений и Социальных Функций**
    
    - **Домен:** Сущности Achievement, Friend, LeaderboardEntry.
    - **Use Cases:** Начисление достижений, ведение дневника, формирование рейтингов, управление списком друзей.
    - **Интерфейсы:** Контроллеры для работы с социальными функциями, репозитории для хранения достижений и социальных данных.
    - **Инфраструктура:** Реализация доступа к данным, возможно, интеграция с внешними аналитическими сервисами.

---

## 3. Пример структуры проекта

/myapp
├── cmd/                      # Точка входа, настройка приложения, сборка сервера
│   └── server/
│       └── main.go
├── internal/                 # Вся бизнес-логика и модули приложения
│   ├── auth/                 # Модуль аутентификации и пользователей
│   │   ├── domain/           # Домен: сущности, бизнес-правила
│   │   │   └── user.go
│   │   ├── usecase/          # Сценарии использования (регистрация, вход)
│   │   │   └── auth_usecase.go
│   │   ├── interfaces/       # Контроллеры, репозитории, адаптеры
│   │   │   ├── controller.go
│   │   │   └── repository.go
│   │   └── infrastructure/   # Реализации репозиториев, интеграция с authentik
│   │       └── postgres_repository.go
│   ├── habits/               # Модуль привычек и квестов
│   │   ├── domain/
│   │   │   ├── habit.go
│   │   │   └── quest.go
│   │   ├── usecase/
│   │   │   └── habit_usecase.go
│   │   ├── interfaces/
│   │   │   ├── controller.go
│   │   │   └── repository.go
│   │   └── infrastructure/
│   │       └── ml_adapter.go  # Например, адаптер для NLP/ML сервиса
│   ├── achievements/         # Модуль достижений и социальных функций
│   │   ├── domain/
│   │   │   └── achievement.go
│   │   ├── usecase/
│   │   │   └── achievement_usecase.go
│   │   ├── interfaces/
│   │   │   ├── controller.go
│   │   │   └── repository.go
│   │   └── infrastructure/
│   │       └── leaderboard_impl.go
│   └── shared/               # Общие утилиты, middleware, ошибки, логирование
│       └── middleware.go
└── pkg/                      # Общие библиотеки, которые могут использоваться вне проекта

- **cmd:** Точка входа в приложение. Здесь можно настроить маршрутизацию, интеграцию с Traefik (например, через соответствующие параметры) и старт сервера.
- **internal:** Основное пространство для бизнес-логики. Каждый модуль (auth, habits, achievements) имеет свою структуру, разделённую по слоям Clean Architecture.
- **shared:** Общие компоненты, такие как middleware для проверки JWT, логирование, обработка ошибок, которые используются всеми модулями.
- **pkg:** Вспомогательные библиотеки, которые могут быть полезны в разных частях приложения или даже в других проектах.

